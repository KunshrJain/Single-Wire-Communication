#ifndef COMMS_H
#define COMMS_H

#include <Arduino.h>

class Single_Wire_Comms {
  private:
    int KJTP[39][6] = {
      {0,0,0,0,0,0}, {0,0,0,0,0,1}, {0,0,0,0,1,0}, {0,0,0,0,1,1},
      {0,0,0,1,0,0}, {0,0,0,1,0,1}, {0,0,0,1,1,0}, {0,0,0,1,1,1},
      {0,0,1,0,0,0}, {0,0,1,0,0,1}, {0,0,1,0,1,0}, {0,0,1,0,1,1},
      {0,0,1,1,0,0}, {0,0,1,1,0,1}, {0,0,1,1,1,0}, {0,0,1,1,1,1},
      {0,1,0,0,0,0}, {0,1,0,0,0,1}, {0,1,0,0,1,0}, {0,1,0,0,1,1},
      {0,1,0,1,0,0}, {0,1,0,1,0,1}, {0,1,0,1,1,0}, {0,1,0,1,1,1},
      {0,1,1,0,0,0}, {0,1,1,0,0,1}, {0,1,1,0,1,0}, {0,1,1,0,1,1},
      {0,1,1,1,0,0}, {0,1,1,1,0,1}, {0,1,1,1,1,0}, {0,1,1,1,1,1},
      {1,0,0,0,0,0}, {1,0,0,0,0,1}, {1,0,0,0,1,0}, {1,0,0,0,1,1},
      {1,0,0,1,0,0}, {1,0,0,1,0,1}
    };

    char KJIP[39] = {
      '0','1','2','3','4','5','6','7','8','9',
      'a','b','c','d','e','f','g','h','i','j',
      'k','l','m','n','o','p','q','r','s','t',
      'u','v','w','x','y','z',' ','\n'
    };

    uint8_t RTX_PIN;
    uint8_t ledpin;

    void sendChar(char c);
    void receive();

  public:
    void initialize(uint8_t pin, uint8_t lp, uint32_t baud_rate);
    void start();
};

#endif
